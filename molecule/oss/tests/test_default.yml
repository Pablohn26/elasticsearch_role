---

service:
  elasticsearch:
    enabled: true
    running: true

user:
  {{ elasticsearch_user }}:
    exists: true
    groups:
      - {{ elasticsearch_group }}
    uid:
      lt: 1000
group:
  {{ elasticsearch_group }}:
    exists: true
    gid:
      lt: 1000
command:
  sysctl:
    # required attributes
    exit-status: 0
    # defaults to hash key
    exec: "sysctl -a"
    # optional attributes
    stdout:
      - "vm.max_map_count = 262144"
    stderr: []
    timeout: 10000 # in milliseconds
    skip: false

port:
  tcp:{{ elasticsearch_api_port }}:
    listening: true
  tcp:{{ elasticsearch_tcp_port }}:
    listening: true

http:
  http://{{ inventory_hostname }}:{{ elasticsearch_api_port }}:
    status: 200
  http://{{ inventory_hostname }}:{{ elasticsearch_api_port }}/_cluster/health:
    status: 200
    body:
      - "green"
